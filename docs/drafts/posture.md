# 物联网系统方案


## 前端 小程序

- 用户登录
  - 绑定手机号
  - 绑定设备
  - 获取信息
- 连接网络流程
  - 开机后若设备未联网则开启蓝牙20分钟
  - 若超时可长按设备按钮再次开启蓝牙20分钟
  - 打开app,点击添加设备,授权蓝牙扫描周围设备
  - 若未找到提示长按设备按钮开启蓝牙,找到后进入下一页面
  - 蓝牙连接后输入并传输wifi名称和密码
  - 若设备成功连接网络,关闭蓝牙,app显示联网成功
  - 若连接未成功,app提示,重复上一过程
- 设备绑定和失绑
  - 给设备完成联网的用户自动绑定
  - 用户主动失绑 或 新绑定取代
- 数据安全
  - 一台设备同时只能绑定一个用户
  - 用户可以多设备登录
  - 设备数据只传给绑定用户


## 后端

后端基于FastApi

1. 用户信息模块
2. 图像识别模块
3. 数据分析模块

### 用户信息模块

用户数据库中存储用户信息和绑定设备号

### 图像识别模块

基于开源模型获取关键点坐标, 再用分类模型对一系列坐标进行分类, 得出姿态


同时保存图片和分析结果,超过一周后删除


### 数据分析模块

固定时间统计数据,归纳后删除

